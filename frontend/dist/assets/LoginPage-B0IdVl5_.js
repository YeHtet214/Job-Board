import{R as F,u as E,a as k,b as A,r as l,j as e,C as V,c as M,d as P,e as z,f as B,g as R,L as x,h as f,S as W,B as h,i as G,A as H,k as q}from"./index-p34BVjv6.js";import{F as D}from"./index.esm-DArLBWuV.js";import{F as I}from"./Form-DBm2B7tt.js";import{I as T}from"./InputFieldWithLabel-DeHRSKJX.js";import{L as Y,S as J}from"./auth.schema-I71J8rHF.js";import{P as O,S as K}from"./PasswordFieldWithLabel-BfGqb9x7.js";import{A as Q}from"./AuthLayout-93eNJb2q.js";import{M as U}from"./mail-BIcE5EKX.js";import"./en-US-2wKFi4xW.js";import"./endOfMonth-Cvw2Tj17.js";import"./format-BrDpOTCP.js";import"./label-DPBphUux.js";import"./input-D2tw3W5N.js";import"./eye-off-C7bVvEyj.js";import"./eye-C_wxQzYL.js";const X=({handleResendVerification:i,resendingVerification:s})=>e.jsx(H,{className:"block bg-amber-50 border-amber-200 mb-4 w-full",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(U,{className:"h-4 w-4 text-amber-600 mr-2"}),e.jsx(q,{className:"text-amber-800 flex-1",children:"Your email is not verified. Need a new verification email?"}),e.jsx(h,{variant:"outline",size:"sm",className:"ml-2 border-amber-500 text-amber-700 hover:bg-amber-100 hover:text-amber-800",onClick:i,disabled:s,children:s?e.jsxs("span",{className:"flex items-center",children:[e.jsx(f,{size:"sm",className:"mr-1"})," Sending..."]}):"Resend"})]})}),ue=()=>{const[i,s]=F.useState({}),{login:p,googleLogin:b,resendVerification:j}=E(),g=k(),{toast:o}=A(),[v,n]=l.useState(!1),[c,w]=l.useState(""),[N,m]=l.useState(!1),y={email:"",password:"",remember:!1},C=async(a,{setSubmitting:r,setFieldError:d})=>{s({}),n(!1);try{await p(a.email,a.password),g("/")}catch(u){const t=u instanceof Error?u.message:"An error occurred during login";t.toLowerCase().includes("email not found")?d("email","Email not found"):t.toLowerCase().includes("invalid password")?d("password","Invalid Password"):t.toLowerCase().includes("verify your email")?(n(!0),w(a.email),s({general:"Your email has not been verified yet. Please check your inbox or request a new verification email."})):(s({general:t}),o({title:"Login Failed",description:t,variant:"destructive"}))}finally{r(!1)}},L=async()=>{s({});try{await b()}catch(a){const r=a instanceof Error?a.message:"An error occurred during Google login";s({general:r}),o({title:"Google Login Failed",description:r,variant:"destructive"})}},S=async()=>{if(c){m(!0);try{await j(c),o({title:"Verification Email Sent",description:"A new verification email has been sent to your inbox. Please check and follow the instructions.",variant:"default"})}catch(a){const r=a instanceof Error?a.message:"Failed to resend verification email";o({title:"Error",description:r,variant:"destructive"})}finally{m(!1)}}};return e.jsx(Q,{title:"Welcome to Job Board",subtitle:"Find your dream job or the perfect candidate",imageSrc:"/auth-background-alt.svg",imagePosition:"right",children:e.jsxs(V,{className:"border-jb-surface shadow-lg",children:[e.jsxs(M,{className:"space-y-1",children:[e.jsx(P,{className:"text-2xl font-bold text-center text-jb-text",children:"Welcome back"}),e.jsx(z,{className:"text-center text-jb-text-muted",children:"Enter your credentials to sign in to your account"})]}),e.jsxs(B,{className:"space-y-4",children:[i.general&&e.jsxs("div",{className:"bg-jb-danger/15 text-jb-danger flex items-center p-3 rounded-md text-sm",role:"alert",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:i.general})]}),v&&e.jsx(X,{resendingVerification:N,handleResendVerification:S}),e.jsx(D,{initialValues:y,validationSchema:Y,onSubmit:C,children:({isSubmitting:a})=>e.jsxs(I,{className:"space-y-4",children:[e.jsx(T,{formik:!0,name:"email",label:"Email",placeholder:"name@example.com",autoComplete:"email",required:!0,disabled:a}),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsx(O,{formik:!0,name:"password",label:"Password",placeholder:"••••••••",autoComplete:"current-password",required:!0,disabled:a}),e.jsx(x,{to:"/forgot-password",className:"text-sm font-medium text-jb-primary opacity-70 hover:opacity-100 hover:underline absolute top-0 right-0",children:"Forgot password?"})]}),e.jsx(K,{formik:!0,name:"remember",label:"Remember me",disabled:a}),e.jsx(J,{type:"submit",className:"w-full",disabled:a,children:a?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(f,{size:"sm",className:"mr-2"})," Signing in..."]}):"Sign in"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(W,{className:"w-full"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-jb-bg px-2 text-jb-text-muted",children:"Or continue with"})})]}),e.jsxs(h,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2",onClick:L,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",className:"w-5 h-5",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]}),e.jsx(G,{className:"flex justify-center border-t border-jb-surface p-4",children:e.jsxs("p",{className:"text-sm text-jb-text-muted",children:["Don't have an account?"," ",e.jsx(x,{to:"/register",className:"font-medium text-jb-primary hover:underline",children:"Create an account"})]})})]})})};export{ue as default};
