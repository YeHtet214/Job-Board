import{t as f,j as e,w as j,v as F,a as I,r as S,b as z,C as B,c as P,d as U,e as Y,f as D,B as p,h as E}from"./index-p34BVjv6.js";import{u as M,F as R,c as A,g as O,d as r,h as $}from"./index.esm-DArLBWuV.js";import{T as _,a as H,b as u,c as h}from"./tabs-BahjVTED.js";import{I as n}from"./InputFieldWithLabel-DeHRSKJX.js";import{S as b}from"./SelectFieldWithLabel-DTV_oNJu.js";import{T as W}from"./TextareaField-BegYSJzM.js";import"./input-D2tw3W5N.js";import{M as G}from"./map-pin-yYVjCuP0.js";import{G as V}from"./globe-DQ4Ry-pd.js";import{C as Z}from"./calendar-DRX9Qd72.js";import{U as J}from"./company.service-yom-wa_-.js";import{L as K}from"./label-DPBphUux.js";import{e as Q,f as X}from"./useCompanyQueries-BAavX-MV.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],g=f("Image",ee);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],N=f("Info",se),ae=["Technology","Healthcare","Finance","Education","Retail","Manufacturing","Media","Construction","Transportation","Hospitality","Entertainment","Agriculture","Energy","Telecommunications","Other"].map(s=>({value:s,label:s})),ie=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{formik:!0,name:"name",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Company Name*"]}),placeholder:"Enter your company name",required:!0}),e.jsx(W,{formik:!0,name:"description",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Company Description*"]}),placeholder:"Describe your company, mission, values, and what makes it unique",rows:5,required:!0}),e.jsx(b,{formik:!0,name:"industry",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Industry*"]}),options:ae,placeholder:"Select industry",required:!0})]}),re=["1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1001-5000 employees","5000+ employees"].map(s=>({value:s,label:s})),te=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{formik:!0,name:"location",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Location"]}),placeholder:"City, State, Country",required:!0}),e.jsx(n,{formik:!0,name:"website",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Website"]}),placeholder:"https://yourcompany.com"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n,{formik:!0,name:"foundedYear",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Founded Year"]}),placeholder:"e.g. 2010",required:!0}),e.jsx(b,{formik:!0,name:"size",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Company Size"]}),options:re,placeholder:"Select company size"})]})]}),le=()=>{const{values:s}=M();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{formik:!0,name:"logo",label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Logo URL"]}),placeholder:"https://example.com/your-logo.png"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please provide a URL to your company logo. For best results, use a square image (recommended size: 300x300px)."})]}),s.logo&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"mb-2",children:"Logo Preview"}),e.jsx("div",{className:"mt-2 rounded-md overflow-hidden border border-gray-200 w-32 h-32 flex items-center justify-center",children:e.jsx("img",{src:s.logo,alt:"Company Logo Preview",className:"max-w-full max-h-full object-contain",onError:t=>{t.currentTarget.src="https://via.placeholder.com/300?text=Invalid+Image"}})})]})]})},ne=A().shape({name:r().min(2,"Company name is too short").max(100,"Company name is too long").required("Company name is required"),description:r().min(20,"Description must be at least 20 characters").max(1e3,"Description is too long").required("Company description is required"),website:r().url("Please enter a valid URL").nullable(),location:r().required("Location is required"),industry:r().required("Industry is required"),foundedYear:$().min(1800,"Year must be after 1800").max(new Date().getFullYear(),"Year cannot be in the future").nullable(),size:r().nullable(),logo:r().url("Please enter a valid image URL").nullable()}),ye=({company:s,isNewCompany:t})=>{const d=I(),[y,o]=S.useState("basic-info"),{toast:c}=z(),v=Q(),C=X(),w={name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",website:(s==null?void 0:s.website)||"",location:(s==null?void 0:s.location)||"",industry:(s==null?void 0:s.industry)||"",foundedYear:(s==null?void 0:s.foundedYear)||void 0,size:(s==null?void 0:s.size)||"",logo:(s==null?void 0:s.logo)||""},k=async(i,l)=>{const{setSubmitting:T,validateForm:L}=l;try{const a=await L();if(Object.keys(a).length>0){a.name||a.description||a.industry?o("basic-info"):a.location||a.website||a.foundedYear||a.size?o("details"):a.logo&&o("branding");const m=Object.keys(a).map(q=>{const x=q.replace(/([A-Z])/g," $1").toLowerCase();return x.charAt(0).toUpperCase()+x.slice(1)}).join(", ");c({title:"Required Fields Missing",description:`Please complete the following fields: ${m}`,variant:"default"});return}s?(await C.mutateAsync({id:s.id,data:i}),c({title:"Success",description:"Company profile has been updated successfully.",variant:"success"}),d("/dashboard")):(await v.mutateAsync(i),c({title:"Success",description:"Company profile has been created successfully."}),d("/dashboard"))}catch(a){const m=a instanceof Error?a.message:"An error occurred while saving the company profile";c({title:"Error",description:m,variant:"destructive"})}finally{T(!1)}};return e.jsxs(B,{children:[e.jsxs(P,{children:[e.jsx(U,{children:t?"New Company Profile":"Company Profile"}),e.jsx(Y,{children:t?"Fill in your company details to get started":"Update your company information visible to job seekers"})]}),e.jsx(D,{children:e.jsx(R,{initialValues:w,validationSchema:ne,onSubmit:k,enableReinitialize:!0,validateOnChange:!1,validateOnBlur:!0,children:({errors:i,isSubmitting:l})=>e.jsxs(O,{children:[e.jsxs(_,{value:y,onValueChange:o,className:"w-full",children:[e.jsxs(H,{className:"grid grid-cols-3 mb-8",children:[e.jsxs(u,{value:"basic-info",className:"text-base",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Basic Info"}),e.jsx("span",{className:"sm:hidden",children:"Basic"}),(i.name||i.description||i.industry)&&e.jsx("span",{className:"ml-2 h-2 w-2 rounded-full bg-jb-text-primary"})]}),e.jsxs(u,{value:"details",className:"text-base",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Company Details"}),e.jsx("span",{className:"sm:hidden",children:"Details"}),(i.location||i.website||i.foundedYear||i.size)&&e.jsx("span",{className:"ml-2 h-2 w-2 rounded-full bg-jb-text-primary"})]}),e.jsxs(u,{value:"branding",className:"text-base",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Branding"}),e.jsx("span",{className:"sm:hidden",children:"Brand"}),i.logo&&e.jsx("span",{className:"ml-2 h-2 w-2 rounded-full bg-jb-text-primary"})]})]}),e.jsx(h,{value:"basic-info",className:"mt-0",children:e.jsx(ie,{})}),e.jsx(h,{value:"details",className:"mt-0",children:e.jsx(te,{})}),e.jsx(h,{value:"branding",className:"mt-0",children:e.jsx(le,{})})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>d(-1),disabled:l,children:"Cancel"}),e.jsx(p,{type:"submit",className:"bg-jb-primary text-white hover:bg-jb-primary/90",disabled:l,children:l?e.jsx(E,{size:"sm"}):t?"Create Company":"Update Company"})]})]})})})]})};export{ye as C,N as I};
