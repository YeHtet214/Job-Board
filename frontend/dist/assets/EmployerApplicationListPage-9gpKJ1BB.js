import{t as B,j as e,n as c,a as U,u as V,b as O,r as i,h as _,B as r,C as H,c as J,d as z,e as W,X as Y,f as G,U as $,V as M,W as X,Y as Z,Z as q,x as K,_ as Q}from"./index-p34BVjv6.js";import{S as ee,a as ae,b as se,c as te,d as E}from"./select-BqDyQQzE.js";import{I as le}from"./input-D2tw3W5N.js";import{u as ie,a as re,f as ne,g as oe,U as ce}from"./dashboard.utils-D5g8Xit0.js";import{m as L}from"./proxy-DfJG_b9P.js";import{S as de}from"./search-C1eo2NOW.js";import{E as me}from"./eye-C_wxQzYL.js";import{C as xe}from"./clipboard-list-COxkZcIq.js";import"./index-D5HIZ0ay.js";import"./floating-ui.react-dom-CxFaRRov.js";import"./index-CIe-b8_N.js";import"./check-D6M7RNXc.js";import"./application.service-CmxcU4-G.js";import"./mail-BIcE5EKX.js";import"./bookmark-Dye3LQda.js";import"./file-text-CCTf3hu_.js";import"./calendar-DRX9Qd72.js";import"./clock-kkW7g1v3.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],he=B("Filter",ue);function pe({className:t,...l}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:c("w-full caption-bottom text-sm",t),...l})})}function je({className:t,...l}){return e.jsx("thead",{"data-slot":"table-header",className:c("[&_tr]:border-b",t),...l})}function be({className:t,...l}){return e.jsx("tbody",{"data-slot":"table-body",className:c("[&_tr:last-child]:border-0",t),...l})}function D({className:t,...l}){return e.jsx("tr",{"data-slot":"table-row",className:c("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...l})}function u({className:t,...l}){return e.jsx("th",{"data-slot":"table-head",className:c("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})}function h({className:t,...l}){return e.jsx("td",{"data-slot":"table-cell",className:c("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})}const Be=()=>{const t=U(),{currentUser:l}=V(),{toast:f}=O(),[d,g]=i.useState([]),[b,v]=i.useState([]),[m,N]=i.useState(""),[x,y]=i.useState("ALL"),[s,w]=i.useState(null),[T,p]=i.useState(!1),{data:j,isLoading:k,error:A}=ie({enabled:(l==null?void 0:l.role)==="EMPLOYER"}),{mutate:F,isPending:I}=re();i.useEffect(()=>{j&&(g(j.applications),v(j.applications))},[j]),i.useEffect(()=>{let a=d;if(m){const n=m.toLowerCase();a=a.filter(o=>o.applicantName.toLowerCase().includes(n)||o.jobTitle.toLowerCase().includes(n))}x!=="ALL"&&(a=a.filter(n=>n.status===x)),v(a)},[m,x,d]);const C=()=>{N(""),y("ALL")},P=a=>{w(a),p(!0)},R=a=>{s&&F({id:s.id,statusData:{status:a}},{onSuccess:()=>{f({title:"Status updated",description:`Application status updated to ${a.toLowerCase()}.`});const n=d.map(o=>o.id===s.id?{...o,status:a}:o);g(n),p(!1),w(null)},onError:()=>{f({title:"Error",description:"Failed to update application status. Please try again.",variant:"destructive"})}})};if(k)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(_,{})});if(A)return e.jsx("div",{className:"container mx-auto max-w-6xl py-10 px-4 sm:px-6 text-center",children:e.jsx("p",{className:"text-red-500",children:"Error loading applications. Please try again later."})});const S=[{value:"PENDING",label:"Pending"},{value:"REVIEWING",label:"Reviewing"},{value:"INTERVIEW",label:"Interview"},{value:"REJECTED",label:"Rejected"},{value:"ACCEPTED",label:"Accepted"}];return e.jsxs("div",{className:"container mx-auto max-w-6xl py-10 px-4 sm:px-6",children:[e.jsxs(L.div,{className:"flex justify-between items-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-jobboard-darkblue",children:"All Applications"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Review and manage applications for your job postings"})]}),e.jsx(r,{onClick:()=>t("/employer/dashboard"),variant:"outline",children:"Back to Dashboard"})]}),e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.1},children:e.jsxs(H,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{children:"Job Applications"}),e.jsxs(W,{children:[b.length," applications found"]})]}),e.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(le,{type:"text",placeholder:"Search by name or job title...",className:"pl-9 w-full sm:w-[250px]",value:m,onChange:a=>N(a.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{value:x,onValueChange:y,children:[e.jsx(ae,{className:"w-full sm:w-[180px]",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx(se,{placeholder:"Filter by status"})]})}),e.jsxs(te,{children:[e.jsx(E,{value:"ALL",children:"All Statuses"}),S.map(a=>e.jsx(E,{value:a.value,children:a.label},a.value))]})]}),(m||x!=="ALL")&&e.jsx(r,{variant:"ghost",size:"icon",onClick:C,title:"Clear filters",children:e.jsx(Y,{className:"h-4 w-4"})})]})]})]})}),e.jsx(G,{children:b.length>0?e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs(pe,{children:[e.jsx(je,{children:e.jsxs(D,{children:[e.jsx(u,{children:"Applicant"}),e.jsx(u,{children:"Job Title"}),e.jsx(u,{children:"Date Applied"}),e.jsx(u,{children:"Status"}),e.jsx(u,{className:"text-right",children:"Actions"})]})}),e.jsx(be,{children:b.map(a=>e.jsxs(D,{children:[e.jsx(h,{className:"font-medium",children:a.applicantName}),e.jsx(h,{children:a.jobTitle}),e.jsx(h,{children:ne(a.applied)}),e.jsx(h,{children:oe(a.status)}),e.jsx(h,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>t(`/employer/applications/${a.id}`),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(r,{variant:"secondary",size:"sm",onClick:()=>P(a),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})})]},a.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Applications Found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:d.length===0?"You haven't received any job applications yet.":"No applications match your search filters."}),d.length===0?e.jsx(r,{onClick:()=>t("/employer/jobs/create"),className:"bg-jobboard-darkblue hover:bg-jobboard-darkblue/90",children:"Post a Job"}):e.jsx(r,{variant:"outline",onClick:C,children:"Clear Filters"})]})})]})}),e.jsx($,{open:T,onOpenChange:p,children:e.jsxs(M,{children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Update Application Status"}),e.jsxs(q,{children:["Change the status for ",s==null?void 0:s.applicantName,"'s application for ",s==null?void 0:s.jobTitle]})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:e.jsx("div",{className:"col-span-4 space-y-3",children:S.map(a=>e.jsx("div",{children:e.jsxs(r,{variant:(s==null?void 0:s.status)===a.value?"default":"outline",className:"w-full justify-start",onClick:()=>R(a.value),disabled:(s==null?void 0:s.status)===a.value||I,children:[a.label,(s==null?void 0:s.status)===a.value&&e.jsx(K,{className:"ml-2 bg-green-100 text-green-800 border-green-200",children:"Current"})]})},a.value))})})}),e.jsx(Q,{children:e.jsx(r,{variant:"outline",onClick:()=>p(!1),children:"Cancel"})})]})})]})};export{Be as default};
