import{t as _,j as e,r as T,B as w,X as H,g as P}from"./index-p34BVjv6.js";import{u as E,a as V}from"./index.esm-DArLBWuV.js";import{L as B}from"./label-DPBphUux.js";import{F as X}from"./file-text-CCTf3hu_.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],z=_("Upload",D),Q=s=>{var k;const{label:u,name:t,className:a="",disabled:m=!1,required:d=!1}=s;if("formik"in s&&s.formik)if(E()){const[h,f]=V({name:t,type:"checkbox"}),r=f.touched&&f.error;return e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx("input",{type:"checkbox",id:t,disabled:m,className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${a}`,...h}),e.jsxs("label",{htmlFor:t,className:"ml-2 block text-sm text-gray-700",children:[u," ",d&&e.jsx("span",{className:"text-red-500",children:"*"})]}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600 ml-6",children:f.error})]})}else return console.warn(`CheckboxField with name "${t}" is marked as a Formik field but no Formik context was found.`),e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx("input",{type:"checkbox",id:t,name:t,disabled:m,className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${a}`}),e.jsxs("label",{htmlFor:t,className:"ml-2 block text-sm text-gray-700",children:[u," ",d&&e.jsx("span",{className:"text-red-500",children:"*"})]})]});else{const{checked:x,onChange:h,onBlur:f,errors:r}=s,n=r&&r[t];return e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx("input",{type:"checkbox",id:t,name:t,checked:x,onChange:h,onBlur:f,disabled:m,className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${a}`}),e.jsxs("label",{htmlFor:t,className:"ml-2 block text-sm text-gray-700",children:[u," ",d&&e.jsx("span",{className:"text-red-500",children:"*"})]}),n&&e.jsx("p",{className:"mt-1 text-sm text-red-600 ml-6",children:(k=r[t])==null?void 0:k.message})]})}},Y=s=>{var $;const{label:u,name:t,accept:a="*/*",maxSize:m=5*1024*1024,description:d,className:k="",disabled:x=!1,required:h=!1,showPreview:f=!0}=s,[r,n]=T.useState(null),b=T.useRef(null),C=E(),[W,y,N]=V(t),j="formik"in s&&s.formik&&!!C,g=j?W.value:s.formik===!1?s.value:null,I=j?y.touched&&y.error||r:s.formik===!1&&s.errors&&s.errors[t]||r,M=j?r||y.error:r||s.formik===!1&&s.errors&&(($=s.errors[t])==null?void 0:$.message),L=i=>{if(i.target.files&&i.target.files[0]){const c=i.target.files[0];if(c.size>m){n(`File size exceeds the ${(m/(1024*1024)).toFixed(1)}MB limit`),N.setValue(null);return}if(a!=="*/*"){const F=c.type,p=a.split(",").map(l=>l.trim());let o=!1;for(const l of p)if(l.includes("/*")){const v=l.split("/")[0];if(F.startsWith(v)){o=!0;break}}else if(l===F){o=!0;break}else if(l.startsWith(".")&&c.name.endsWith(l)){o=!0;break}if(!o){n(`Invalid file type. Accepted: ${a}`),N.setValue(null);return}}n(null),N.setValue(c),N.setTouched(!0)}},S=i=>{if((!("formik"in s)||s.formik===!1)&&i.target.files&&i.target.files[0]){const c=i.target.files[0];if(c.size>m){n(`File size exceeds the ${(m/(1024*1024)).toFixed(1)}MB limit`),s.onChange(null);return}if(a!=="*/*"){const F=c.type,p=a.split(",").map(l=>l.trim());let o=!1;for(const l of p)if(l.includes("/*")){const v=l.split("/")[0];if(F.startsWith(v)){o=!0;break}}else if(l===F){o=!0;break}else if(l.startsWith(".")&&c.name.endsWith(l)){o=!0;break}if(!o){n(`Invalid file type. Accepted: ${a}`),s.onChange(null);return}}n(null),s.onChange(c),s.onBlur&&s.onBlur()}},A=i=>{j?L(i):S(i)},R=()=>{N.setValue(null),b.current&&(b.current.value=""),n(null)},U=()=>{(!("formik"in s)||s.formik===!1)&&(s.onChange(null),b.current&&(b.current.value=""),n(null))},q=()=>{j?R():U()};return"formik"in s&&s.formik&&!C?(console.warn(`FileInputField with name "${t}" is marked as a Formik field but no Formik context was found.`),e.jsxs("div",{className:`mb-4 ${k} !d-inline-block `,children:[e.jsxs(B,{htmlFor:t,className:"block text-sm font-medium mb-1",children:[u," ",h&&e.jsx("span",{className:"text-red-500",children:"*"})]}),d&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:d}),e.jsx("div",{className:"mt-1",children:e.jsxs(w,{type:"button",variant:"outline",disabled:x,className:"flex-none border-2 !border-blue-500 !d-inline-block",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Select File"]})})]})):e.jsxs("div",{className:`mb-4 ${k}`,children:[e.jsxs(B,{htmlFor:t,className:"block text-sm font-medium mb-1",children:[u," ",h&&e.jsx("span",{className:"text-red-500",children:"*"})]}),d&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:d}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("input",{type:"file",id:t,ref:b,accept:a,onChange:A,disabled:x,className:"hidden"}),e.jsxs(w,{type:"button",variant:"outline",onClick:()=>{var i;return(i=b.current)==null?void 0:i.click()},disabled:x,className:"flex-none",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Select File"]}),g&&e.jsx(w,{type:"button",variant:"ghost",onClick:q,disabled:x,className:"p-1 h-auto ",size:"sm",children:e.jsx(H,{className:"h-4 w-4 text-gray-500"})})]}),g&&f&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(X,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm truncate max-w-xs",children:g.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(g.size/1024/1024).toFixed(2)," MB)"]})]}),I&&e.jsxs("div",{className:"mt-1 flex items-center text-red-500 text-sm",children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),e.jsx("p",{children:M})]})]})};export{Q as C,Y as F,z as U};
