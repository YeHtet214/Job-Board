import{j as e,C as g,c as L,d as E,w as f,f as N,r as p,R,u as T,L as u,B as C,x as $,v as z}from"./index-p34BVjv6.js";import{I as B}from"./input-D2tw3W5N.js";import{S as b}from"./skeleton-CCBVX9c4.js";import{C as M}from"./checkbox-rrddwFIF.js";import{L as P}from"./label-DPBphUux.js";import{U as k}from"./company.service-yom-wa_-.js";import{a as Y,u as F}from"./useCompanyQueries-BAavX-MV.js";import{S as A}from"./search-C1eo2NOW.js";import{M as H}from"./map-pin-yYVjCuP0.js";import"./index-CIe-b8_N.js";import"./check-D6M7RNXc.js";const O=({selectedIndustries:i,setSelectedIndustries:r,selectedSizes:x,setSelectedSizes:o})=>{const h=["Technology","Healthcare","Finance","Education","Manufacturing","Retail","Hospitality","Media","Transportation","Construction"],n=["Startup (1-10)","Small (11-50)","Medium (51-200)","Large (201-500)","Enterprise (500+)"],j=s=>{r(a=>a.includes(s)?a.filter(c=>c!==s):[...a,s])},m=s=>{o(a=>a.includes(s)?a.filter(c=>c!==s):[...a,s])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(E,{className:"text-lg flex items-center",children:[e.jsx(f,{className:"h-5 w-5 mr-2 text-jobboard-purple"}),"Industry"]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:`industry-${s}`,checked:i.includes(s),onCheckedChange:()=>j(s)}),e.jsx(P,{htmlFor:`industry-${s}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s})]},s))})})]}),e.jsxs(g,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(E,{className:"text-lg flex items-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2 text-jobboard-purple"}),"Company Size"]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:`size-${s}`,checked:x.includes(s),onCheckedChange:()=>m(s)}),e.jsx(P,{htmlFor:`size-${s}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s})]},s))})})]})]})},I=p.createContext(void 0),D=()=>{const i=p.useContext(I);if(i===void 0)throw new Error("useCompanies must be used within a CompaniesProvider");return i},U=({children:i})=>{const[r,x]=p.useState(""),[o,h]=p.useState([]),[n,j]=p.useState([]),{data:m=[],isLoading:s,error:a,refetch:c}=Y(),w=R.useMemo(()=>{let l=m;return r&&(l=l.filter(d=>{var v,y,S;return((v=d.name)==null?void 0:v.toLowerCase().includes(r.toLowerCase()))||((y=d.description)==null?void 0:y.toLowerCase().includes(r.toLowerCase()))||((S=d.location)==null?void 0:S.toLowerCase().includes(r.toLowerCase()))})),o.length>0&&(l=l.filter(d=>o.includes(d.industry))),n.length>0&&(l=l.filter(d=>d.size?n.includes(d.size):!1)),l},[m,r,o,n]),t={companies:m,filteredCompanies:w,isLoading:s,error:a,searchTerm:r,setSearchTerm:x,selectedIndustries:o,setSelectedIndustries:h,selectedSizes:n,setSelectedSizes:j,refetchCompanies:c};return e.jsx(I.Provider,{value:t,children:i})},_=()=>{const{filteredCompanies:i,isLoading:r,searchTerm:x,setSearchTerm:o,selectedIndustries:h,setSelectedIndustries:n,selectedSizes:j,setSelectedSizes:m}=D(),{currentUser:s}=T(),a=(s==null?void 0:s.role)==="EMPLOYER",{data:c}=a?F():{data:null},w=t=>{o(t.target.value)};return e.jsx("section",{children:e.jsx("div",{className:"bg-jb-bg py-10",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-jb-text mb-2",children:"Browse Companies"}),e.jsx("p",{className:"text-jb-text-muted mb-8 max-w-2xl",children:"Discover top employers hiring now. Research company profiles, read reviews, and explore job opportunities."}),e.jsxs("div",{className:"relative mb-8 max-w-2xl",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-jb-text-muted"})}),e.jsx(B,{type:"text",placeholder:"Search companies by name, description or location...",className:"pl-10 py-3 bg-jb-surface text-jb-text border border-jb-surface-muted",value:x,onChange:w})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(O,{selectedIndustries:h,setSelectedIndustries:n,selectedSizes:j,setSelectedSizes:m}),e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-jb-primary to-jb-surface rounded-lg shadow-lg p-6 text-center",children:[e.jsx(f,{className:"h-12 w-12 mx-auto text-white mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-3",children:"Are You an Employer?"}),e.jsx("p",{className:"text-white/80 mb-6 text-sm",children:a&&c?"Manage your company profile and continue posting jobs to find the perfect candidates.":"Create your company profile and start posting jobs to find the perfect candidates."}),a?c?e.jsx(u,{to:"/employer/company/profile",children:e.jsx(C,{className:"bg-white text-jb-primary hover:bg-gray-100 font-semibold w-full",children:"Manage Company Profile"})}):e.jsx(u,{to:"/employer/company/profile",children:e.jsx(C,{className:"bg-white text-jb-primary hover:bg-gray-100 font-semibold w-full",children:"Create Company Profile"})}):e.jsx(u,{to:"/register?role=EMPLOYER",children:e.jsx(C,{className:"bg-white text-jb-primary hover:bg-gray-100 font-semibold w-full",children:"Register as Employer"})})]})]}),e.jsx("div",{className:"md:col-span-3",children:r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(6)].map((t,l)=>e.jsx(g,{className:"overflow-hidden",children:e.jsxs(N,{className:"p-0",children:[e.jsx("div",{className:"h-32 bg-jb-surface"}),e.jsxs("div",{className:"p-6",children:[e.jsx(b,{className:"h-6 w-3/4 mb-4 bg-jb-surface"}),e.jsx(b,{className:"h-4 w-full mb-2 bg-jb-surface"}),e.jsx(b,{className:"h-4 w-full mb-2 bg-jb-surface"}),e.jsx(b,{className:"h-4 w-2/3 bg-jb-surface"})]})]})},l))}):i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"h-16 w-16 mx-auto text-jb-text-muted mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-jb-text mb-2",children:"No companies found"}),e.jsx("p",{className:"text-jb-text-muted",children:"Try adjusting your search or filters to find what you're looking for."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(t=>e.jsx(u,{to:`/companies/${t.id}`,children:e.jsx(g,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:e.jsxs(N,{className:"p-0",children:[e.jsx("div",{className:"h-32 bg-gradient-to-r from-jb-primary/10 to-jb-surface/10 relative",children:t.logo?e.jsx("img",{src:t.logo,alt:`${t.name} logo`,className:"absolute bottom-0 left-6 w-16 h-16 rounded-md border-2 border-white bg-white object-contain"}):e.jsx("div",{className:"absolute bottom-0 left-6 w-16 h-16 rounded-md border-2 border-white bg-white flex items-center justify-center",children:e.jsx(f,{className:"h-8 w-8 text-jb-primary"})})}),e.jsxs("div",{className:"p-6 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl font-semibold text-jb-text mt-2",children:t.name}),e.jsx($,{variant:"outline",className:"bg-jb-surface text-jb-text-muted border-jb-surface-muted",children:t.industry})]}),e.jsxs("div",{className:"flex items-center text-jb-text-muted mt-2 text-sm",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:t.location})]}),e.jsx("p",{className:"text-jb-text-muted mt-3 text-sm line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[t.size&&e.jsxs("div",{className:"flex items-center text-xs text-jb-text-muted",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:t.size})]}),t.foundedYear&&e.jsxs("div",{className:"flex items-center text-xs text-jb-text-muted",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:["Est. ",t.foundedYear]})]})]})]})]})})},t.id))})})]})]})})})},te=()=>e.jsx(U,{children:e.jsx(_,{})});export{te as default};
