var f=Object.defineProperty;var m=(s,t,e)=>t in s?f(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var d=(s,t,e)=>m(s,typeof t!="symbol"?t+"":t,e);import{a9 as y,a1 as P,a2 as n,b as i,a3 as l}from"./index-p34BVjv6.js";class g extends y{constructor(){super(...arguments);d(this,"endpoints",{ALL:"/profiles",MY_PROFILE:"/profiles/me",DETAIL:e=>`/profiles/${e}`,UPLOAD_RESUME:"/profiles/upload-resume",UPLOAD_PROFILE_IMAGE:"/profiles/upload-profile-image"})}async getMyProfile(){const e=await this.get(this.endpoints.MY_PROFILE);return console.log("get profile data: ",e),e.data.data}async getProfileById(e){return(await this.get(this.endpoints.DETAIL(e))).data.data}async createProfile(e){const r=new FormData;for(const[c,p]of Object.entries(e))r.append(c,p);return(await this.post(this.endpoints.MY_PROFILE,r)).data.data}async updateProfile(e){const r=new FormData;for(const[c,p]of Object.entries(e))r.append(c,p);return(await this.put(this.endpoints.MY_PROFILE,r)).data.data}async uploadResume(e){const r=new FormData;return r.append("resume",e),(await this.post(this.endpoints.UPLOAD_RESUME,r)).data.data.url}async uploadProfileImage(e){const r=new FormData;return r.append("image",e),(await this.post(this.endpoints.UPLOAD_PROFILE_IMAGE,r)).data.data.url}}const o=new g,a={all:["profile"],details:()=>[...a.all,"details"],resume:()=>[...a.all,"resume"],profileImage:()=>[...a.all,"profile-image"]},v=s=>P({queryKey:a.details(),queryFn:async()=>{var t;try{return await o.getMyProfile()}catch(e){if(((t=e.response)==null?void 0:t.status)===404)return null;throw e}},...s}),D=()=>{const s=n(),{toast:t}=i();return l({mutationFn:e=>o.createProfile(e),onSuccess:e=>{s.setQueryData(a.details(),e),t({title:"Success",description:"Profile created successfully",variant:"default"})},onError:e=>{t({title:"Error",description:"Failed to create profile. Please try again.",variant:"destructive"}),console.error("Error creating profile:",e)}})},I=()=>{const s=n(),{toast:t}=i();return l({mutationFn:e=>o.updateProfile(e),onSuccess:e=>{s.setQueryData(a.details(),e),t({title:"Success",description:"Profile updated successfully",variant:"default"})},onError:e=>{t({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"}),console.error("Error updating profile:",e)}})},h=()=>{const s=n(),{toast:t}=i();return l({mutationFn:e=>o.uploadResume(e),onSuccess:e=>{s.setQueryData(a.details(),r=>r?{...r,resumeUrl:e}:null),t({title:"Success",description:"Resume uploaded successfully",variant:"default"})},onError:e=>{t({title:"Error",description:"Failed to upload resume. Please try again.",variant:"destructive"}),console.error("Error uploading resume:",e)}})},L=()=>{const s=n(),{toast:t}=i();return l({mutationFn:e=>o.uploadProfileImage(e),onSuccess:e=>{s.setQueryData(a.details(),r=>r?{...r,profileImageUrl:e}:null),t({title:"Success",description:"Profile image uploaded successfully",variant:"default"})},onError:e=>{t({title:"Error",description:"Failed to upload profile image. Please try again.",variant:"destructive"}),console.error("Error uploading profile image:",e)}})};export{D as a,I as b,h as c,L as d,v as u};
