import{t as C,j as e,C as b,c as g,d as v,e as D,f as N,a0 as q,B as m,r as o,K as we,ad as ke,ae as Ce,af as re,n as Y,x as I,w as L,u as le,h as P,X as z,i as $,v as se,S as Se,g as Pe,a as Ee}from"./index-p34BVjv6.js";import{u as De,a as Ie,b as Ae,c as Re,d as Le}from"./useProfileQueries-Dsx4O2ac.js";import{A as Me}from"./arrow-right-zXYDcJeg.js";import{T as ie,a as ne,b as w,c as k}from"./tabs-BahjVTED.js";import{C as oe}from"./calendar-DRX9Qd72.js";import{M as Fe}from"./map-pin-yYVjCuP0.js";import{j as V,c as G,d as x,k as U,b as ce,F as _e,g as qe}from"./index.esm-DArLBWuV.js";import{I as h}from"./InputFieldWithLabel-DeHRSKJX.js";import{T as W}from"./TextareaField-BegYSJzM.js";import"./input-D2tw3W5N.js";import{U as de,C as me,F as $e}from"./FileInputFieldWithLabel-Cy-Tb6ZB.js";import{P as H}from"./plus-mP3iLHwD.js";import{G as Be}from"./globe-DQ4Ry-pd.js";import{F as Ue}from"./file-text-CCTf3hu_.js";import{m as R}from"./proxy-DfJG_b9P.js";import"./index-D5HIZ0ay.js";import"./en-US-2wKFi4xW.js";import"./endOfMonth-Cvw2Tj17.js";import"./format-BrDpOTCP.js";import"./label-DPBphUux.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Oe=C("Award",Te);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],xe=C("BookOpen",Ye);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],T=C("CirclePlus",ze);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Ge=C("Github",Ve);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],M=C("GraduationCap",We);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ue=C("Link",He);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Ke=C("Linkedin",Je);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ze=C("Pencil",Xe),Qe=({enterEditMode:s})=>e.jsxs(b,{className:"border shadow-md bg-white overflow-hidden",children:[e.jsxs(g,{className:"bg-gradient-to-r from-jb-primary/10 to-jb-primary/10 pb-8",children:[e.jsx(v,{className:"text-2xl text-jobboard-darkblue",children:"Create Your Professional Profile"}),e.jsx(D,{className:"text-gray-600",children:"Complete your profile to increase your chances of landing the perfect job"})]}),e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[e.jsx("div",{className:"lg:w-1/3 flex justify-center",children:e.jsx("div",{className:"relative w-48 h-48 bg-jobboard-purple/10 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"h-24 w-24 text-jobboard-purple/60"})})}),e.jsxs("div",{className:"lg:w-2/3 text-center lg:text-left",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3 text-jobboard-darkblue",children:"Why Complete Your Profile?"}),e.jsxs("ul",{className:"space-y-3 mb-6 text-gray-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-jobboard-purple mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Showcase your skills and experience to potential employers"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-jobboard-purple mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Get matched with jobs that align with your qualifications"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-jobboard-purple mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Stand out from other candidates with a comprehensive profile"})]})]}),e.jsxs(m,{onClick:s,className:"mt-4 bg-jobboard-darkblue hover:bg-jobboard-darkblue/90 text-white px-8 py-6 h-auto",children:[e.jsx("span",{className:"mr-2",children:"Create Profile"}),e.jsx(Me,{className:"h-4 w-4"})]})]})]})})]});var he=o.forwardRef((s,a)=>{const{children:t,...r}=s,n=o.Children.toArray(t),i=n.find(ss);if(i){const l=i.props.children,c=n.map(d=>d===i?o.Children.count(l)>1?o.Children.only(null):o.isValidElement(l)?l.props.children:null:d);return e.jsx(O,{...r,ref:a,children:o.isValidElement(l)?o.cloneElement(l,void 0,c):null})}return e.jsx(O,{...r,ref:a,children:t})});he.displayName="Slot";var O=o.forwardRef((s,a)=>{const{children:t,...r}=s;if(o.isValidElement(t)){const n=ts(t),i=as(r,t.props);return t.type!==o.Fragment&&(i.ref=a?we(a,n):n),o.cloneElement(t,i)}return o.Children.count(t)>1?o.Children.only(null):null});O.displayName="SlotClone";var es=({children:s})=>e.jsx(e.Fragment,{children:s});function ss(s){return o.isValidElement(s)&&s.type===es}function as(s,a){const t={...a};for(const r in a){const n=s[r],i=a[r];/^on[A-Z]/.test(r)?n&&i?t[r]=(...c)=>{i(...c),n(...c)}:n&&(t[r]=n):r==="style"?t[r]={...n,...i}:r==="className"&&(t[r]=[n,i].filter(Boolean).join(" "))}return{...s,...t}}function ts(s){var r,n;let a=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=a&&"isReactWarning"in a&&a.isReactWarning;return t?s.ref:(a=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,t=a&&"isReactWarning"in a&&a.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var rs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],J=rs.reduce((s,a)=>{const t=o.forwardRef((r,n)=>{const{asChild:i,...l}=r,c=i?he:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...l,ref:n})});return t.displayName=`Primitive.${a}`,{...s,[a]:t}},{}),K="Avatar",[ls,Js]=ke(K),[is,pe]=ls(K),fe=o.forwardRef((s,a)=>{const{__scopeAvatar:t,...r}=s,[n,i]=o.useState("idle");return e.jsx(is,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:e.jsx(J.span,{...r,ref:a})})});fe.displayName=K;var je="AvatarImage",be=o.forwardRef((s,a)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:n=()=>{},...i}=s,l=pe(je,t),c=ns(r,i.referrerPolicy),d=Ce(f=>{n(f),l.onImageLoadingStatusChange(f)});return re(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?e.jsx(J.img,{...i,ref:a,src:r}):null});be.displayName=je;var Ne="AvatarFallback",ge=o.forwardRef((s,a)=>{const{__scopeAvatar:t,delayMs:r,...n}=s,i=pe(Ne,t),[l,c]=o.useState(r===void 0);return o.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(J.span,{...n,ref:a}):null});ge.displayName=Ne;function ns(s,a){const[t,r]=o.useState("idle");return re(()=>{if(!s){r("error");return}let n=!0;const i=new window.Image,l=c=>()=>{n&&r(c)};return r("loading"),i.onload=l("loaded"),i.onerror=l("error"),i.src=s,a&&(i.referrerPolicy=a),()=>{n=!1}},[s,a]),t}var os=fe,cs=be,ds=ge;function ms({className:s,...a}){return e.jsx(os,{"data-slot":"avatar",className:Y("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...a})}function xs({className:s,...a}){return e.jsx(cs,{"data-slot":"avatar-image",className:Y("aspect-square size-full",s),...a})}function us({className:s,...a}){return e.jsx(ds,{"data-slot":"avatar-fallback",className:Y("bg-muted flex size-full items-center justify-center rounded-full",s),...a})}const hs=({profile:s,currentUser:a})=>{var t,r;return e.jsxs(b,{className:"border border-border shadow-sm pt-0",children:[e.jsx(g,{className:"border-b bg-accent/30 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs(ms,{className:"h-20 w-20 border-2 border-background shadow-sm",children:[e.jsx(xs,{src:s.profileImageURL}),e.jsx(us,{className:"bg-primary text-primary-foreground text-2xl",children:((t=a==null?void 0:a.firstName)==null?void 0:t.charAt(0))||"U"})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-2xl text-foreground",children:(a==null?void 0:a.firstName)||"Job Seeker"}),e.jsx(D,{className:"text-muted-foreground mt-1",children:(a==null?void 0:a.email)||""})]})]})}),e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"Bio"}),e.jsx("p",{className:"text-foreground/90 whitespace-pre-line",children:s.bio})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(r=s.skills)==null?void 0:r.map((n,i)=>e.jsx(I,{variant:"secondary",className:"text-foreground hover:bg-accent",children:n},i))})]})]})})]})},ps=({education:s})=>e.jsxs(b,{className:"border border-border shadow-sm",children:[e.jsx(g,{children:e.jsx(v,{className:"text-xl text-jb-primary",children:"Education"})}),e.jsx(N,{children:s!=null&&s.length?e.jsx("div",{className:"space-y-6",children:s.map((a,t)=>e.jsxs("div",{className:"border-b border-border/50 pb-5 last:border-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-semibold text-foreground",children:[a.degree," in ",a.fieldOfStudy]}),e.jsxs("div",{className:"flex items-center text-muted-foreground mt-1",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:a.institution})]})]}),e.jsxs("div",{className:"mt-1 md:mt-0 flex items-center text-sm text-muted-foreground",children:[e.jsx(oe,{className:"h-3 w-3 mr-1 flex-shrink-0"}),e.jsxs("span",{children:[a.startDate," - ",a.isCurrent?"Present":a.endDate]})]})]}),a.description&&e.jsx("p",{className:"mt-2 text-foreground/90",children:a.description})]},a.id||t))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(M,{className:"h-12 w-12 mx-auto text-muted-foreground/30 mb-3"}),e.jsx("p",{children:"No education information added yet"})]})})]}),fs=({experience:s})=>e.jsxs(b,{className:"border border-border shadow-sm",children:[e.jsx(g,{children:e.jsx(v,{className:"text-xl text-jb-primary",children:"Work Experience"})}),e.jsx(N,{children:s!=null&&s.length?e.jsx("div",{className:"space-y-6",children:s.map((a,t)=>e.jsxs("div",{className:"border-b border-border/50 pb-5 last:border-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-semibold text-foreground",children:a.position}),e.jsxs("div",{className:"flex items-center text-muted-foreground mt-1",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:a.company})]}),a.location&&e.jsxs("div",{className:"flex items-center text-muted-foreground/80 mt-1 text-sm",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:a.location})]})]}),e.jsxs("div",{className:"mt-1 md:mt-0 flex items-center text-sm text-muted-foreground",children:[e.jsx(oe,{className:"h-3 w-3 mr-1 flex-shrink-0"}),e.jsxs("span",{children:[a.startDate," - ",a.isCurrent?"Present":a.endDate]})]})]}),e.jsx("p",{className:"mt-2 text-foreground/90 whitespace-pre-line",children:a.description})]},a.id||t))}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{children:"No work experience added yet"})]})})]}),js=({linkedInUrl:s,githubUrl:a,portfolioUrl:t,resumeUrl:r})=>e.jsxs(b,{className:"border border-border shadow-sm",children:[e.jsx(g,{children:e.jsx(v,{className:"text-xl text-jb-primary",children:"Links & Resume"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[s||a||t?e.jsxs("div",{className:"space-y-3",children:[s&&e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-jb-primary hover:underline",children:[e.jsx(I,{variant:"outline",className:"border-[#0077B5] text-[#0077B5] hover:bg-[#0077B5]/10",children:"LinkedIn"}),e.jsx("span",{className:"text-foreground/90",children:s})]}),a&&e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-jb-primary hover:underline",children:[e.jsx(I,{variant:"outline",className:"border-foreground text-foreground hover:bg-accent",children:"GitHub"}),e.jsx("span",{className:"text-foreground/90",children:a})]}),t&&e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-jb-primary hover:underline",children:[e.jsx(I,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:"Portfolio"}),t]})]}):e.jsx("p",{className:"text-gray-500",children:"No links added yet"}),e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsx("h3",{className:"text-md font-semibold mb-3 text-foreground",children:"Resume"}),r?e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 border border-jb-primary rounded-md text-sm font-medium text-jb-primary hover:bg-jb-primary/10",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"View Resume"]}):e.jsx("p",{className:"text-gray-500",children:"No resume uploaded yet"})]})]})})]}),bs=({profile:s,viewTab:a,setViewTab:t})=>{const{currentUser:r}=le();return e.jsxs(ie,{value:a,onValueChange:t,className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto pb-1",children:e.jsxs(ne,{className:"w-full mb-6 bg-background border border-border min-w-max md:w-auto",children:[e.jsxs(w,{value:"overview",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap data-[state=active]:bg-accent/50 data-[state=active]:text-foreground data-[state=active]:shadow-sm px-2 sm:px-4",children:[e.jsx(q,{className:"inline-block h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Overview"})]}),e.jsxs(w,{value:"education",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap data-[state=active]:bg-accent/50 data-[state=active]:text-foreground data-[state=active]:shadow-sm px-2 sm:px-4",children:[e.jsx(xe,{className:"inline-block h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Education"})]}),e.jsxs(w,{value:"experience",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap data-[state=active]:bg-accent/50 data-[state=active]:text-foreground data-[state=active]:shadow-sm px-2 sm:px-4",children:[e.jsx(L,{className:"inline-block h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Experience"})]}),e.jsxs(w,{value:"links",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap data-[state=active]:bg-accent/50 data-[state=active]:text-foreground data-[state=active]:shadow-sm px-2 sm:px-4",children:[e.jsx(ue,{className:"inline-block h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Links & Resume"})]})]})}),e.jsx(k,{value:"overview",className:"mt-0",children:e.jsx(hs,{profile:s,currentUser:r})}),e.jsx(k,{value:"education",className:"mt-0",children:e.jsx(ps,{education:s.education})}),e.jsx(k,{value:"experience",className:"mt-0",children:e.jsx(fs,{experience:s.experience})}),e.jsx(k,{value:"links",className:"mt-0",children:e.jsx(js,{linkedInUrl:s.linkedInUrl,githubUrl:s.githubUrl,portfolioUrl:s.portfolioUrl,resumeUrl:s.resumeUrl})})]})},Ns=({formik:s,isSaving:a,onTabChange:t,onProfileImageUpload:r,profileImageURL:n})=>{const{values:i,setFieldValue:l}=s,c=o.useRef(null),[d,f]=o.useState(!1);console.log("PROFILE IMAGE URL ",n);const S=async u=>{var y;const j=(y=u.target.files)==null?void 0:y[0];if(j){if(!j.type.startsWith("image/")){alert("Please upload an image file");return}if(j.size>5*1024*1024){alert("Image size should be less than 5MB");return}try{f(!0),await r(j)}catch(B){console.error("Error uploading profile image:",B)}finally{f(!1),c.current&&(c.current.value="")}}},p=()=>{var u;(u=c.current)==null||u.click()},A=()=>{var j;const u=(j=i.newSkill)==null?void 0:j.trim();u&&(!i.skills||!i.skills.includes(u))&&(l("skills",[...i.skills||[],u]),l("newSkill",""))};return e.jsxs(b,{className:"border-none shadow-none",children:[e.jsxs(g,{className:"px-0 md:px-6",children:[e.jsx(v,{className:"text-xl md:text-2xl text-jb-primary",children:"Basic Information"}),e.jsx(D,{className:"text-muted-foreground",children:"Tell us about yourself"})]}),e.jsxs(N,{className:"space-y-6 px-0 md:px-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-accent flex items-center justify-center overflow-hidden border-2 border-border",children:n?e.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(q,{className:"h-12 w-12 text-muted-foreground/50"})}),e.jsx("button",{type:"button",onClick:p,disabled:d,className:"absolute -bottom-2 -right-2 bg-background p-1.5 rounded-full shadow-md border border-border text-foreground hover:bg-accent/50 transition-colors",children:d?e.jsx(P,{className:"h-4 w-4"}):e.jsx(de,{className:"h-4 w-4"})}),e.jsx("input",{type:"file",ref:c,onChange:S,accept:"image/*",className:"hidden",disabled:d})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, GIF or PNG. Max size of 5MB."})})]}),e.jsx("div",{className:"border-t border-gray-200 my-6"}),e.jsx(W,{formik:!0,name:"bio",label:"Bio",placeholder:"Write a brief introduction about yourself...",className:"min-h-32",rows:6}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.jsx(V,{name:"skills",render:u=>e.jsx(e.Fragment,{children:(i==null?void 0:i.skills)&&i.skills.map((j,y)=>e.jsxs(I,{className:"bg-jobboard-purple hover:bg-jobboard-purple/90 flex items-center gap-1 px-3 py-1.5",children:[j,e.jsx("button",{type:"button",onClick:()=>u.remove(y),className:"ml-1 text-white hover:bg-jobboard-purple/70 rounded-full p-0.5",children:e.jsx(z,{className:"h-3 w-3"})})]},y))})})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(h,{formik:!0,name:"newSkill",label:"",placeholder:"Add a skill...",className:"flex-1"}),e.jsxs(m,{type:"button",variant:"outline",onClick:A,className:"mt-1",children:[e.jsx(H,{className:"h-4 w-4 mr-1"})," Add"]})]})]})]}),e.jsxs($,{className:"flex justify-between px-0 md:px-6",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>t("education"),children:"Next"}),e.jsx(m,{type:"submit",disabled:a,children:a?e.jsxs("span",{className:"flex items-center",children:[e.jsx(P,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save"})]})]})},gs=({formik:s,isSaving:a,onTabChange:t})=>{const{values:r}=s;return e.jsxs(b,{className:"border-none shadow-none",children:[e.jsxs(g,{className:"px-0 md:px-6",children:[e.jsx(v,{className:"text-xl md:text-2xl text-jobboard-darkblue",children:"Education"}),e.jsx(D,{className:"text-gray-500",children:"Add your educational background"})]}),e.jsx(N,{className:"space-y-6 px-0 md:px-6",children:e.jsx(V,{name:"education",render:n=>e.jsxs("div",{className:"space-y-8",children:[r!=null&&r.education&&r.education.length>0?r.education.map((i,l)=>e.jsxs("div",{className:"relative p-4 sm:p-6 border rounded-lg",children:[e.jsx("button",{type:"button",className:"absolute top-2 right-2 text-gray-500 hover:text-red-500",onClick:()=>n.remove(l),children:e.jsx(z,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(M,{className:"mr-2 h-6 w-6 text-jobboard-purple"}),e.jsxs("h3",{className:"text-lg font-medium",children:["Education #",l+1]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsx(h,{formik:!0,name:`education.${l}.institution`,label:"Institution",placeholder:"e.g. Harvard University"}),e.jsx(h,{formik:!0,name:`education.${l}.degree`,label:"Degree",placeholder:"e.g. Bachelor of Science"}),e.jsx(h,{formik:!0,name:`education.${l}.fieldOfStudy`,label:"Field of Study",placeholder:"e.g. Computer Science"}),e.jsx("div",{className:"space-y-2 col-span-2 flex items-center gap-2",children:e.jsx(me,{formik:!0,name:`education.${l}.isCurrent`,label:"I currently study here"})}),e.jsx(h,{formik:!0,name:`education.${l}.startDate`,label:"Start Date",placeholder:"YYYY-MM-DD"}),e.jsx(h,{formik:!0,name:`education.${l}.endDate`,label:"End Date",placeholder:"YYYY-MM-DD"}),e.jsx(W,{formik:!0,name:`education.${l}.description`,label:"Description (Optional)",placeholder:"Add more details about your education...",className:"min-h-20 col-span-2"})]})]},l)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(M,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"No education added yet. Add your first education entry."})]}),e.jsxs(m,{type:"button",variant:"outline",className:"w-full mt-4",onClick:()=>n.push({institution:"",degree:"",fieldOfStudy:"",startDate:"",endDate:"",isCurrent:!1,description:""}),children:[e.jsx(H,{className:"h-4 w-4 mr-2"})," Add Education"]})]})})}),e.jsxs($,{className:"flex justify-between px-0 md:px-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>t("info"),children:"Previous"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>t("experience"),children:"Next"})]}),e.jsx(m,{type:"submit",disabled:a,children:a?e.jsxs("span",{className:"flex items-center",children:[e.jsx(P,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save"})]})]})},vs=({formik:s,isSaving:a,onTabChange:t})=>{const{values:r}=s;return e.jsxs(b,{className:"border-none shadow-none",children:[e.jsxs(g,{className:"px-0 md:px-6",children:[e.jsx(v,{className:"text-xl md:text-2xl text-jobboard-darkblue",children:"Work Experience"}),e.jsx(D,{className:"text-gray-500",children:"Add your work history to showcase your professional experience"})]}),e.jsx(N,{className:"space-y-6 px-0 md:px-6",children:e.jsx(V,{name:"experience",render:n=>e.jsxs("div",{className:"space-y-8",children:[r!=null&&r.experience&&r.experience.length>0?r.experience.map((i,l)=>e.jsxs("div",{className:"relative p-4 sm:p-6 border rounded-lg",children:[e.jsx("button",{type:"button",className:"absolute top-2 right-2 text-gray-500 hover:text-red-500",onClick:()=>n.remove(l),children:e.jsx(z,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(se,{className:"mr-2 h-6 w-6 text-jobboard-purple"}),e.jsxs("h3",{className:"text-lg font-medium",children:["Experience #",l+1]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsx(h,{formik:!0,name:`experience.${l}.company`,label:"Company",placeholder:"e.g. Google Inc."}),e.jsx(h,{formik:!0,name:`experience.${l}.position`,label:"Position",placeholder:"e.g. Software Engineer"}),e.jsx(h,{formik:!0,name:`experience.${l}.location`,label:"Location (Optional)",placeholder:"e.g. San Francisco, CA"}),e.jsx("div",{className:"space-y-2 col-span-2 flex items-center gap-2",children:e.jsx(me,{formik:!0,name:`experience.${l}.isCurrent`,label:"I currently work here"})}),e.jsx(h,{formik:!0,name:`experience.${l}.startDate`,label:"Start Date",placeholder:"YYYY-MM-DD"}),e.jsx(h,{formik:!0,name:`experience.${l}.endDate`,label:"End Date",placeholder:"YYYY-MM-DD"}),e.jsx(W,{formik:!0,name:`experience.${l}.description`,label:"Description",placeholder:"Describe your responsibilities, achievements, and skills used in this role...",className:"min-h-32 col-span-2"})]})]},l)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(se,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"No work experience added yet. Add your first job."})]}),e.jsxs(m,{type:"button",variant:"outline",className:"w-full mt-4",onClick:()=>n.push({company:"",position:"",location:"",startDate:"",endDate:"",isCurrent:!1,description:""}),children:[e.jsx(H,{className:"h-4 w-4 mr-2"})," Add Experience"]})]})})}),e.jsxs($,{className:"flex justify-between px-0 md:px-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>t("education"),children:"Previous"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>t("links"),children:"Next"})]}),e.jsx(m,{type:"submit",disabled:a,children:a?e.jsxs("span",{className:"flex items-center",children:[e.jsx(P,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save"})]})]})},ys=({formik:s,isSaving:a,onTabChange:t,onResumeUpload:r,isResumeUploading:n})=>{const{values:i}=s,[l,c]=o.useState(null),[d,f]=o.useState(null),S=async()=>{if(l)try{await r(l),c(null)}catch{f("Failed to upload resume. Please try again.")}};return e.jsxs(b,{className:"border-none shadow-none",children:[e.jsxs(g,{className:"px-0 md:px-6",children:[e.jsx(v,{className:"text-xl md:text-2xl text-jobboard-darkblue",children:"Links & Resume"}),e.jsx(D,{className:"text-gray-500",children:"Add your professional profiles and resume"})]}),e.jsxs(N,{className:"space-y-6 px-0 md:px-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Professional Links"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-[#0077B5]"}),e.jsx(h,{formik:!0,name:"linkedInUrl",label:"LinkedIn Profile",placeholder:"https://linkedin.com/in/yourprofile",className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5"}),e.jsx(h,{formik:!0,name:"githubUrl",label:"GitHub Profile",placeholder:"https://github.com/yourusername",className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-blue-500"}),e.jsx(h,{formik:!0,name:"portfolioUrl",label:"Portfolio Website",placeholder:"https://yourportfolio.com",className:"flex-1"})]})]})]}),e.jsx(Se,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Resume"}),e.jsx("div",{className:"border border-dashed rounded-lg p-4 bg-gray-50",children:i.resumeUrl?e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"h-8 w-8 text-jobboard-darkblue"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Resume uploaded"}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:i.resumeUrl.split("/").pop()})]})]}),e.jsx("a",{href:i.resumeUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 focus:outline-none",children:"View Resume"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx(de,{className:"h-12 w-12 text-gray-300 mb-2"}),e.jsx("p",{className:"mb-4 text-center",children:"Upload your resume (PDF, DOC, or DOCX up to 5MB)"}),e.jsxs("div",{className:"flex flex-col justify-center sm:flex-row space-3 w-full max-w-md",children:[e.jsx("div",{className:"",children:e.jsx($e,{name:"resume",label:"",description:"",accept:".pdf,.doc,.docx",required:!1,formik:!0})}),l&&e.jsx(m,{type:"button",onClick:S,disabled:n,className:"flex-1",children:n?e.jsxs("span",{className:"flex items-center",children:[e.jsx(P,{size:"sm",className:"mr-2"}),"Uploading..."]}):"Upload"})]}),l&&!d&&e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Selected: ",l.name," (",(l.size/1024/1024).toFixed(2)," MB)"]}),d&&e.jsxs("div",{className:"mt-2 flex items-center text-red-500 text-sm",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),d]})]})})]})]}),e.jsxs($,{className:"flex justify-between px-0 md:px-6",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>t("experience"),children:"Previous"}),e.jsx(m,{type:"submit",disabled:a,children:a?e.jsxs("span",{className:"flex items-center",children:[e.jsx(P,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save"})]})]})},F=s=>{if(!s)return!1;const a=new Date(s);return!isNaN(a.getTime())},_=s=>s?new Date(s)<=new Date:!0,ve=(s,a)=>!s||!a?!0:new Date(s)<=new Date(a),ws=G().shape({institution:x().required("Institution is required").max(100,"Institution name is too long"),degree:x().required("Degree is required").max(100,"Degree name is too long"),fieldOfStudy:x().required("Field of study is required").max(100,"Field of study is too long"),startDate:x().required("Start date is required").test("is-valid-date","Invalid date format",F).test("not-in-future","Start date cannot be in the future",_),isCurrent:ce().default(!1),endDate:x().when(["isCurrent","startDate"],{is:s=>!s,then:s=>s.required("End date is required").test("is-valid-date","Invalid date format",F).test("not-in-future","End date cannot be in the future",_).test("is-after-start-date","End date must be after start date",function(a){const{startDate:t}=this.parent;return ve(t,a)}),otherwise:s=>s.notRequired()})}),ks=G().shape({company:x().required("Company is required").max(100,"Company name is too long"),position:x().required("Position is required").max(100,"Position title is too long"),description:x().required("Description is required").min(20,"Description should be at least 20 characters").max(1e3,"Description should not exceed 1000 characters"),startDate:x().required("Start date is required").test("is-valid-date","Invalid date format",F).test("not-in-future","Start date cannot be in the future",_),isCurrent:ce().default(!1),endDate:x().when(["isCurrent","startDate"],{is:s=>!s,then:s=>s.required("End date is required").test("is-valid-date","Invalid date format",F).test("not-in-future","End date cannot be in the future",_).test("is-after-start-date","End date must be after start date",function(a){const{startDate:t}=this.parent;return ve(t,a)}),otherwise:s=>s.notRequired()})}),Cs=x().nullable().transform(s=>s===""?null:s).test("is-valid-linkedin","Invalid LinkedIn URL",function(s){return s?/^https?:\/\/(www\.)?linkedin\.com\/in\/[\w-]+\/?$/.test(s):!0}),Ss=x().nullable().transform(s=>s===""?null:s).test("is-valid-github","Invalid GitHub URL",function(s){return s?/^https?:\/\/(www\.)?github\.com\/[\w-]+\/?$/.test(s):!0}),Ps=x().nullable().transform(s=>s===""?null:s).url("Must be a valid URL"),Es=G().shape({bio:x().required("Bio is required").min(50,"Bio should be at least 50 characters").max(500,"Bio should not exceed 500 characters"),skills:U().of(x().required()).min(1,"Add at least one skill").max(20,"You can add up to 20 skills"),education:U().of(ws),experience:U().of(ks),linkedInUrl:Cs,githubUrl:Ss,portfolioUrl:Ps,resumeUrl:x().nullable()}),ae=({profile:s,activeTab:a,setActiveTab:t,handleSubmit:r,handleResumeUpload:n,handleProfileImageUpload:i,isCreating:l,isUpdating:c,isUploading:d})=>{const f={...s,newSkill:""},S=async p=>{const{newSkill:A,...u}=p;await r(u)};return e.jsxs(ie,{value:a,onValueChange:t,className:"w-full",children:[e.jsxs(ne,{className:"w-full mb-8",children:[e.jsxs(w,{value:"info",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap",children:[e.jsx(q,{className:"h-3 w-3 hidden sm:inline-block sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Basic Info"})]}),e.jsxs(w,{value:"education",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap",children:[e.jsx(xe,{className:"h-3 w-3 hidden sm:inline-block sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Education"})]}),e.jsxs(w,{value:"experience",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap",children:[e.jsx(L,{className:"h-3 w-3 hidden sm:inline-block sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Experience"})]}),e.jsxs(w,{value:"links",className:"text-xs sm:text-sm md:text-base flex-1 whitespace-nowrap",children:[e.jsx(ue,{className:"h-3 w-3 hidden sm:inline-block sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{children:"Links & Resume"})]})]}),e.jsx(_e,{initialValues:f,validationSchema:Es,onSubmit:S,enableReinitialize:!0,children:p=>e.jsxs(qe,{className:"space-y-6",children:[e.jsx(k,{value:"info",className:"mt-0",children:e.jsx(Ns,{formik:p,isSaving:l||c,onTabChange:t,onProfileImageUpload:i,profileImageURL:s.profileImageURL})}),e.jsx(k,{value:"education",className:"mt-0",children:e.jsx(gs,{formik:p,isSaving:l||c,onTabChange:t})}),e.jsx(k,{value:"experience",className:"mt-0",children:e.jsx(vs,{formik:p,isSaving:l||c,onTabChange:t})}),e.jsx(k,{value:"links",className:"mt-0",children:e.jsx(ys,{formik:p,isSaving:l||c,onTabChange:t,onResumeUpload:n,isResumeUploading:d})})]})})]})},te={id:"",userId:"",bio:"",skills:[],education:[],experience:[],resumeUrl:"",linkedInUrl:"",githubUrl:"",portfolioUrl:"",createdAt:"",updatedAt:""},Ks=()=>{const{currentUser:s}=le(),a=Ee(),[t,r]=o.useState("info"),[n,i]=o.useState(!1),[l,c]=o.useState("overview"),{data:d,isLoading:f}=De(),{mutate:S,isPending:p}=Ie(),{mutate:A,isPending:u}=Ae(),{mutate:j,isPending:y}=Re(),{mutate:B}=Le();o.useEffect(()=>{(s==null?void 0:s.role)!=="JOBSEEKER"&&a("/")},[s,a]),o.useEffect(()=>{i(!1)},[d]);const X=async E=>{try{d!=null&&d.id?await A(E):await S(E),i(!1)}catch(ye){console.error("Error saving profile:",ye)}},Z=async E=>{await j(E)},Q=async E=>{await B(E)},ee=()=>{i(!0),r("info")};return f?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-jb-bg text-jb-text",children:e.jsx(P,{})}):d!=null&&d.id?n?e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto max-w-5xl py-10 px-4 sm:px-6 text-jb-text",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Edit Profile"}),e.jsx(m,{onClick:()=>i(!1),variant:"outline",className:"border-jb-muted text-jb-text hover:bg-jb-muted/10",children:"Cancel"})]}),e.jsx(b,{className:"border border-jb-primary/20 shadow-md bg-jb-surface",children:e.jsx(N,{className:"pt-6",children:e.jsx(ae,{profile:d||te,activeTab:t,setActiveTab:r,handleSubmit:X,handleResumeUpload:Z,handleProfileImageUpload:Q,isCreating:p,isUpdating:u,isUploading:y})})})]}):e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto max-w-5xl py-10 px-4 sm:px-6 text-jb-text",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-jb-text",children:"Profile"}),e.jsxs(m,{onClick:ee,variant:"outline",className:"flex items-center gap-2 border-jb-primary text-jb-text hover:bg-jb-primary/10",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Profile"})]})]}),e.jsx(bs,{profile:d,viewTab:l,setViewTab:c})]}):e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto max-w-5xl py-10 px-4 sm:px-6 text-jb-text",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-jb-text",children:"Profile"}),e.jsx(Qe,{enterEditMode:ee}),n&&e.jsx(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.5},className:"mt-8",children:e.jsx(b,{className:"border border-jb-primary/20 shadow-md bg-jb-surface",children:e.jsx(N,{className:"pt-6",children:e.jsx(ae,{profile:te,activeTab:t,setActiveTab:r,handleSubmit:X,handleResumeUpload:Z,handleProfileImageUpload:Q,isCreating:p,isUpdating:u,isUploading:y})})})})]})};export{Ks as default};
