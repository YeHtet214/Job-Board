import{o as _,a as ee,b as se,r as ae,j as e,h as te,A as k,$ as W,k as B,B as t,w as L,x as S,C as i,c as r,d as l,e as F,f as n,i as G,S as J,a0 as ie}from"./index-p34BVjv6.js";import{T as re,a as le,b as V,c as q}from"./tabs-BahjVTED.js";import{u as ne,d as ce}from"./useApplicationQueries-DGWYOvPD.js";import{C as oe}from"./CancelConfirmAlert-CClhUHis.js";import{M as d}from"./map-pin-yYVjCuP0.js";import{C as de,M as me}from"./mail-open-C543j8ah.js";import{F as U}from"./file-text-CCTf3hu_.js";import{S as xe}from"./square-pen-DTx3FQTO.js";import{C as H}from"./calendar-DRX9Qd72.js";import{C as Q}from"./clock-kkW7g1v3.js";import{C as pe,a as je}from"./circle-x-BKGd6x_V.js";import{f as c}from"./format-BrDpOTCP.js";import"./index-D5HIZ0ay.js";import"./application.service-CmxcU4-G.js";import"./index-jfjf1aYL.js";import"./en-US-2wKFi4xW.js";const he={PENDING:e.jsx(Q,{className:"h-5 w-5 text-yellow-500"}),REVIEWING:e.jsx(me,{className:"h-5 w-5 text-blue-500"}),INTERVIEW:e.jsx(H,{className:"h-5 w-5 text-purple-500"}),ACCEPTED:e.jsx(je,{className:"h-5 w-5 text-green-500"}),REJECTED:e.jsx(pe,{className:"h-5 w-5 text-red-500"})},$={PENDING:"Pending Review",REVIEWING:"Under Review",INTERVIEW:"Interview Scheduled",ACCEPTED:"Application Accepted",REJECTED:"Application Rejected"},O={PENDING:"bg-yellow-100 text-yellow-800",REVIEWING:"bg-blue-100 text-blue-800",INTERVIEW:"bg-purple-100 text-purple-800",ACCEPTED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800"},Pe=()=>{var j,h,u,N,f,b,w,v,y,g,C,A,E,D,T,I,M,R,P;const{id:o}=_(),a=ee(),{toast:m}=se(),{data:s,isLoading:X,error:x}=ne(o||""),{mutate:Y}=ce(),z=async()=>{if(!(!s||!o))try{Y(o),m({title:"Application Withdrawn",description:"Your application has been successfully withdrawn"}),a("/applications")}catch(Z){console.error("Failed to withdraw application:",Z),m({variant:"destructive",title:"Error",description:"Failed to withdraw application. Please try again."})}};if(ae.useEffect(()=>{console.log("Application: ",s)},[s]),X)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(te,{fullScreen:!0})});if(x)return e.jsxs("div",{className:"container mx-auto py-8 px-4 sm:px-6",children:[e.jsxs(k,{variant:"destructive",children:[e.jsx(W,{children:"Error"}),e.jsx(B,{children:x.message||"Failed to load application details. Please try again."})]}),e.jsx("div",{className:"mt-4",children:e.jsx(t,{onClick:()=>a("/dashboard/applications"),children:"Back to Applications"})})]});if(!s)return e.jsxs("div",{className:"container mx-auto py-8 px-4 sm:px-6",children:[e.jsxs(k,{children:[e.jsx(W,{children:"Application Not Found"}),e.jsx(B,{children:"The application you're looking for doesn't exist or you don't have permission to view it."})]}),e.jsx("div",{className:"mt-4",children:e.jsx(t,{onClick:()=>a("/dashboard/applications"),children:"Back to Applications"})})]});const p=s.createdAt?c(new Date(s.createdAt),"MMMM dd, yyyy"):"N/A",K=s.updatedAt?c(new Date(s.updatedAt),"MMMM dd, yyyy"):"N/A";return e.jsxs("div",{className:"container mx-auto py-8 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"",children:((j=s.job)==null?void 0:j.title)||"Job Title"}),e.jsxs("div",{className:"flex flex-wrap items-center text-muted-foreground text-sm gap-x-4 gap-y-2",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),((u=(h=s.job)==null?void 0:h.company)==null?void 0:u.name)||"Company Name"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(d,{className:"h-4 w-4 mr-1"}),((N=s.job)==null?void 0:N.location)||"Location"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Applied: ",p]})]})]}),e.jsx("div",{className:"mt-4 md:mt-0 w-full md:w-auto",children:e.jsx(S,{variant:"outline",className:`text-sm py-1 px-3 font-medium ${O[s.status]}`,children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[he[s.status],$[s.status]]})})})]}),e.jsxs(re,{defaultValue:"details",className:"w-full",children:[e.jsxs(le,{className:"grid w-full grid-cols-2 mb-8",children:[e.jsxs(V,{value:"details",className:"flex items-center justify-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"Application Details"]}),e.jsxs(V,{value:"job",className:"flex items-center justify-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Job Description"]})]}),e.jsx(q,{value:"details",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(l,{className:"text-xl",children:"Application Details"}),e.jsxs(F,{children:["Information about your application for ",(f=s.job)==null?void 0:f.title]})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Cover Letter"}),e.jsx("div",{className:"bg-muted p-4 rounded-md whitespace-pre-wrap",children:s.coverLetter||"No cover letter provided"})]}),s.resumeUrl&&e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{children:"Resume"})]}),e.jsx("iframe",{src:s.resumeUrl,width:"100%",height:"500px",title:"Resume Preview",style:{border:"1px solid #ccc",borderRadius:"8px"}})]})]}),e.jsxs(G,{className:"flex justify-between border-t p-6",children:[e.jsx(t,{variant:"outline",onClick:()=>a("/applications"),children:"Back to Applications"}),s.status==="PENDING"&&e.jsx(oe,{buttonContent:"Withdraw Application",alertTitle:"Withdraw Application",alertDescription:"Are you sure you want to withdraw your application for {application.job?.title} at {application.job?.company?.name}? This action cannot be undone.",cancelItem:s,onWithdraw:z})]})]})}),e.jsxs("div",{children:[e.jsxs(i,{children:[e.jsx(r,{children:e.jsx(l,{className:"text-xl",children:"Application Status"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(S,{variant:"outline",className:`${O[s.status]}`,children:$[s.status]})]}),e.jsx(J,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Applied On"}),e.jsx("span",{className:"text-sm font-medium",children:p})]}),e.jsx(J,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("span",{className:"text-sm font-medium",children:K})]})]})]}),((b=s.job)==null?void 0:b.interviewDate)&&e.jsxs(i,{className:"mt-6",children:[e.jsx(r,{children:e.jsx(l,{className:"text-xl",children:"Interview Details"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c(new Date((w=s.job)==null?void 0:w.interviewDate),"MMMM dd, yyyy")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c(new Date((v=s.job)==null?void 0:v.interviewDate),"h:mm a")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Interview Location"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:"Interview Notes"})]})]})]})]})]})}),e.jsx(q,{value:"job",children:e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(l,{className:"text-xl",children:((y=s.job)==null?void 0:y.title)||"Job Title"}),e.jsxs(F,{className:"flex flex-wrap items-center gap-x-4 gap-y-2",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),((C=(g=s.job)==null?void 0:g.company)==null?void 0:C.name)||"Company Name"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(d,{className:"h-4 w-4 mr-1"}),((A=s.job)==null?void 0:A.location)||"Location"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),((E=s.job)==null?void 0:E.jobType)||"Full-time"]}),((D=s.job)==null?void 0:D.salary)&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),s.job.salary]})]})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Job Description"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:((T=s.job)==null?void 0:T.description)||"No job description available"})]}),((I=s.job)==null?void 0:I.requirements)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Requirements"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:s.job.requirements})]}),((M=s.job)==null?void 0:M.responsibilities)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Responsibilities"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:s.job.responsibilities})]}),((R=s.job)==null?void 0:R.benefits)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Benefits"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:s.job.benefits})]}),((P=s.job)==null?void 0:P.qualifications)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Qualifications"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:s.job.qualifications})]})]}),e.jsx(G,{className:"border-t p-6",children:e.jsx(t,{variant:"outline",onClick:()=>a("/dashboard/applications"),children:"Back to Applications"})})]})})]})]})};export{Pe as default};
