import{t as Y,o as ie,a as ne,b as ce,r as de,j as e,h as M,A as F,$ as S,k as W,B as a,C as l,f as r,x as B,a0 as o,w as G,c as i,d as n,e as oe,i as me,U as xe,V as pe,W as he,Y as je,Z as ue,_ as Ne}from"./index-p34BVjv6.js";import{T as be,a as fe,b as h,c as j}from"./tabs-BahjVTED.js";import{u as ge,a as ve}from"./useApplicationQueries-DGWYOvPD.js";import{A as u}from"./arrow-left-IJ8pBNrm.js";import{m as we}from"./proxy-DfJG_b9P.js";import{C as ye,M as Ee}from"./mail-open-C543j8ah.js";import{C as N}from"./clock-kkW7g1v3.js";import{F as J}from"./file-text-CCTf3hu_.js";import{E as _}from"./external-link-C8aLaBfW.js";import{M as $}from"./mail-BIcE5EKX.js";import{C as X}from"./calendar-DRX9Qd72.js";import{M as O}from"./map-pin-yYVjCuP0.js";import{C as Ce,a as Ae}from"./circle-x-BKGd6x_V.js";import{f as q}from"./format-BrDpOTCP.js";import"./index-D5HIZ0ay.js";import"./application.service-CmxcU4-G.js";import"./en-US-2wKFi4xW.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ie=Y("Download",De);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Te=Y("Phone",ke),z={PENDING:e.jsx(N,{className:"h-5 w-5 text-yellow-500"}),REVIEWING:e.jsx(Ee,{className:"h-5 w-5 text-blue-500"}),INTERVIEW:e.jsx(X,{className:"h-5 w-5 text-purple-500"}),ACCEPTED:e.jsx(Ae,{className:"h-5 w-5 text-green-500"}),REJECTED:e.jsx(Ce,{className:"h-5 w-5 text-red-500"})},H={PENDING:"Pending Review",REVIEWING:"Under Review",INTERVIEW:"Interview Scheduled",ACCEPTED:"Application Accepted",REJECTED:"Application Rejected"},Pe={PENDING:"bg-yellow-100 text-yellow-800",REVIEWING:"bg-blue-100 text-blue-800",INTERVIEW:"bg-purple-100 text-purple-800",ACCEPTED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800"},Ye=()=>{var f,g,v,w,y,E,C,A,D,I,k,T,P,R,U,V,L;const{id:m}=ie(),x=ne(),{toast:b}=ce(),[Z,c]=de.useState(!1),{data:s,isLoading:K,error:p,refetch:Q}=ge(m||""),{mutate:ee,isPending:d}=ve(),se=s!=null&&s.createdAt?q(new Date(s.createdAt),"PPP"):"Unknown",ae=s!=null&&s.updatedAt?q(new Date(s.updatedAt),"PPP"):"Unknown",te=t=>{!s||!m||ee({id:m,updateData:{status:t}},{onSuccess:()=>{b({title:"Status Updated",description:`Application status has been updated to ${H[t]}.`}),c(!1),Q()},onError:re=>{console.error("Failed to update status:",re),b({variant:"destructive",title:"Error",description:"Failed to update application status. Please try again."})}})};if(K)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(M,{})});if(p)return e.jsxs("div",{className:"container mx-auto py-8 px-4 sm:px-6",children:[e.jsxs(F,{variant:"destructive",children:[e.jsx(S,{children:"Error"}),e.jsx(W,{children:p instanceof Error?p.message:"Failed to load application details. Please try again."})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(a,{onClick:()=>x("/employer/applications"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Back to Applications"]})})]});if(!s)return e.jsxs("div",{className:"container mx-auto py-8 px-4 sm:px-6",children:[e.jsxs(F,{children:[e.jsx(S,{children:"Application Not Found"}),e.jsx(W,{children:"The application you're looking for doesn't exist or you don't have permission to view it."})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(a,{onClick:()=>x("/employer/applications"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Back to Applications"]})})]});const le=[{label:"Mark as Reviewing",value:"REVIEWING"},{label:"Schedule Interview",value:"INTERVIEW"},{label:"Accept Applicant",value:"ACCEPTED"},{label:"Reject Application",value:"REJECTED"}];return e.jsxs("div",{className:"container mx-auto py-8 px-4 sm:px-6 max-w-6xl",children:[e.jsxs(we.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>x("/employer/applications"),className:"mb-2",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Back to Applications"]}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-jobboard-darkblue",children:"Application Details"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Reviewing application for ",((f=s.job)==null?void 0:f.title)||"Unknown Position"]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:e.jsxs(a,{onClick:()=>c(!0),disabled:d,className:"bg-jobboard-darkblue hover:bg-jobboard-darkblue/90",children:[d&&e.jsx(M,{size:"sm",className:"mr-2"}),"Update Status"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx(l,{className:"flex-1",children:e.jsxs(r,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"bg-muted rounded-full p-2",children:z[s.status]||z.PENDING}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(B,{className:`mt-1 ${Pe[s.status]}`,children:H[s.status]})]})]})}),e.jsx(l,{className:"flex-1",children:e.jsxs(r,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"bg-muted rounded-full p-2",children:e.jsx(ye,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Applied On"}),e.jsx("p",{className:"font-medium",children:se})]})]})}),e.jsx(l,{className:"flex-1",children:e.jsxs(r,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"bg-muted rounded-full p-2",children:e.jsx(N,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:ae})]})]})})]}),e.jsxs(be,{defaultValue:"application",className:"space-y-4",children:[e.jsxs(fe,{className:"w-full border-b px-0 py-0 gap-0",children:[e.jsxs(h,{value:"application",className:"flex-1 text-sm px-6 py-3 rounded-none data-[state=active]:border-b-2 border-jobboard-darkblue",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Application Details"]}),e.jsxs(h,{value:"applicant",className:"flex-1 text-sm px-6 py-3 rounded-none data-[state=active]:border-b-2 border-jobboard-darkblue",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Applicant Information"]}),e.jsxs(h,{value:"job",className:"flex-1 text-sm px-6 py-3 rounded-none data-[state=active]:border-b-2 border-jobboard-darkblue",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Job Details"]})]}),e.jsx(j,{value:"application",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(n,{className:"text-xl flex items-center",children:[e.jsx(J,{className:"h-5 w-5 mr-2 text-gray-500"}),"Resume"]})}),e.jsx(r,{children:s.resumeUrl?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border border-dashed rounded-lg p-4 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resume uploaded with this application"}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:s.resumeUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"View Resume"]})}),e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:s.resumeUrl,download:!0,children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Download"]})})]})]})}):e.jsx("div",{className:"border border-dashed rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No resume was uploaded with this application"})})})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(n,{className:"text-xl flex items-center",children:[e.jsx($,{className:"h-5 w-5 mr-2 text-gray-500"}),"Cover Letter"]})}),e.jsx(r,{children:s.coverLetter?e.jsx("div",{className:"border rounded-lg p-4",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.coverLetter})}):e.jsx("div",{className:"border border-dashed rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No cover letter was included with this application"})})})]}),s.status==="INTERVIEW"&&e.jsxs(l,{className:"md:col-span-2",children:[e.jsx(i,{children:e.jsxs(n,{className:"text-xl flex items-center",children:[e.jsx(X,{className:"h-5 w-5 mr-2 text-purple-500"}),"Interview Information"]})}),e.jsx(r,{className:"space-y-4",children:e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:e.jsx("p",{className:"text-sm",children:"This application is currently in the interview stage. You may want to contact the applicant to schedule an interview or provide additional information about the interview process."})})})]})]})}),e.jsx(j,{value:"applicant",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(n,{className:"text-xl flex items-center",children:[e.jsx(o,{className:"h-5 w-5 mr-2 text-gray-500"}),"Applicant Information"]})}),e.jsxs(r,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Full Name"}),e.jsxs("p",{className:"text-sm bg-muted p-3 rounded-md",children:[(g=s.applicant)==null?void 0:g.firstName," ",(v=s.applicant)==null?void 0:v.lastName]})]}),((w=s.applicant)==null?void 0:w.email)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsxs("p",{className:"text-sm bg-muted p-3 rounded-md flex items-center",children:[e.jsx($,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("a",{href:`mailto:${s.applicant.email}`,className:"text-blue-600 hover:underline",children:s.applicant.email})]})]}),((y=s.applicant)==null?void 0:y.phone)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone Number"}),e.jsxs("p",{className:"text-sm bg-muted p-3 rounded-md flex items-center",children:[e.jsx(Te,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("a",{href:`tel:${s.applicant.phone}`,className:"text-blue-600 hover:underline",children:s.applicant.phone})]})]}),((E=s.applicant)==null?void 0:E.location)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Location"}),e.jsxs("p",{className:"text-sm bg-muted p-3 rounded-md flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-2 text-gray-500"}),s.applicant.location]})]})]}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:`/profile/${s.applicantId}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"View Full Profile"]})})})]})]})}),e.jsx(j,{value:"job",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{className:"text-xl",children:((C=s.job)==null?void 0:C.title)||"Job Title"}),e.jsxs(oe,{className:"flex flex-wrap items-center gap-x-4 gap-y-2",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),((D=(A=s.job)==null?void 0:A.company)==null?void 0:D.name)||"Company Name"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),((I=s.job)==null?void 0:I.location)||"Location"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-1"}),((k=s.job)==null?void 0:k.jobType)||"Full-time"]}),((T=s.job)==null?void 0:T.salary)&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(o,{className:"h-4 w-4 mr-1"}),s.job.salary]})]})]}),e.jsxs(r,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Job Description"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:((P=s.job)==null?void 0:P.description)||"No job description available"})]}),((R=s.job)==null?void 0:R.requirements)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Requirements"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:s.job.requirements})]}),((U=s.job)==null?void 0:U.responsibilities)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Responsibilities"}),e.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:s.job.responsibilities})]})]}),e.jsx(me,{className:"border-t p-6",children:e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:`/jobs/${s.jobId}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"View Job Posting"]})})})]})})]})]}),e.jsx(xe,{open:Z,onOpenChange:c,children:e.jsxs(pe,{children:[e.jsxs(he,{children:[e.jsx(je,{children:"Update Application Status"}),e.jsxs(ue,{children:["Change the status for ",(V=s.applicant)==null?void 0:V.firstName," ",(L=s.applicant)==null?void 0:L.lastName,"'s application"]})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsx("div",{className:"grid grid-cols-1 items-center gap-4",children:e.jsx("div",{className:"space-y-3",children:le.map(t=>e.jsx("div",{children:e.jsxs(a,{variant:s.status===t.value?"default":"outline",className:"w-full justify-start",onClick:()=>te(t.value),disabled:s.status===t.value||d,children:[t.label,s.status===t.value&&e.jsx(B,{className:"ml-2 bg-green-100 text-green-800 border-green-200",children:"Current"})]})},t.value))})})}),e.jsx(Ne,{children:e.jsx(a,{variant:"outline",onClick:()=>c(!1),disabled:d,children:"Cancel"})})]})})]})};export{Ye as default};
